<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover" />
    <title>PomoSmart - Productividad Inteligente</title>

    <!-- PWA Meta Tags -->
    <meta name="description" content="Aplicaci√≥n de productividad con t√©cnica Pomodoro, gesti√≥n de tareas, materias y estad√≠sticas de estudio." />
    <meta name="theme-color" content="#6366f1" media="(prefers-color-scheme: light)" />
    <meta name="theme-color" content="#0f172a" media="(prefers-color-scheme: dark)" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="PomoSmart" />

    <!-- iOS Splash Screens -->
    <link rel="apple-touch-startup-image" href="/icons/icon-512x512.png" />

    <!-- Manifest -->
    <link rel="manifest" href="/manifest.json" />

    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/icon-72x72.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/icon-192x192.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152x152.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/icons/icon-128x128.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/icons/icon-128x128.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/icons/icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png" />
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png" />

    <!-- Microsoft Tiles -->
    <meta name="msapplication-TileColor" content="#6366f1" />
    <meta name="msapplication-TileImage" content="/icons/icon-144x144.png" />
    <meta name="msapplication-config" content="none" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@200;300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              sans: ['Plus Jakarta Sans', 'sans-serif'],
            },
            borderRadius: {
              '4xl': '2rem',
              '5xl': '3rem',
            },
            animation: {
              'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            }
          }
        }
      }
    </script>
    <style>
      body {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      /* Scrollbar Styles */
      .scrollbar-hide::-webkit-scrollbar {
        display: none;
      }
      .scrollbar-light::-webkit-scrollbar {
        width: 8px;
      }
      .scrollbar-light::-webkit-scrollbar-thumb {
        background: #e2e8f0;
        border-radius: 10px;
      }
      .scrollbar-dark::-webkit-scrollbar {
        width: 8px;
      }
      .scrollbar-dark::-webkit-scrollbar-thumb {
        background: #334155;
        border-radius: 10px;
      }

      /* Advanced Animations */
      @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-20px); }
      }

      @keyframes glow {
        0%, 100% { box-shadow: 0 0 20px rgba(99, 102, 241, 0.3); }
        50% { box-shadow: 0 0 40px rgba(99, 102, 241, 0.6); }
      }

      @keyframes shimmer {
        0% { background-position: -1000px 0; }
        100% { background-position: 1000px 0; }
      }

      @keyframes gradient-shift {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
      }

      @keyframes scale-pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
      }

      /* Glassmorphism Effect */
      .glass-effect {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .glass-effect-dark {
        background: rgba(15, 23, 42, 0.6);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.05);
      }

      /* Gradient Text */
      .gradient-text {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      /* Animated Gradient Background */
      .animated-gradient {
        background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
        background-size: 400% 400%;
        animation: gradient-shift 15s ease infinite;
      }

      /* Card Hover Effects */
      .card-hover-effect {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .card-hover-effect:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 20px 40px -12px rgba(0, 0, 0, 0.15);
      }

      /* Floating Animation */
      .float-animation {
        animation: float 6s ease-in-out infinite;
      }

      /* Glow Effect */
      .glow-effect {
        animation: glow 3s ease-in-out infinite;
      }

      /* Shimmer Effect */
      .shimmer {
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        background-size: 200% 100%;
        animation: shimmer 2s infinite;
      }

      /* Custom Shadows */
      .shadow-glow-indigo {
        box-shadow: 0 10px 40px -10px rgba(99, 102, 241, 0.4);
      }

      .shadow-glow-purple {
        box-shadow: 0 10px 40px -10px rgba(139, 92, 246, 0.4);
      }

      .shadow-glow-pink {
        box-shadow: 0 10px 40px -10px rgba(236, 72, 153, 0.4);
      }

      /* Animated Border Gradient */
      .border-gradient {
        position: relative;
        background: linear-gradient(white, white) padding-box,
                    linear-gradient(135deg, #667eea, #764ba2, #f093fb) border-box;
        border: 2px solid transparent;
      }

      /* Smooth Transitions */
      * {
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* ============================================
         RESPONSIVE DESIGN - MEDIA QUERIES
         ============================================ */

      /* Mobile First - Base styles for mobile (320px - 767px) */
      @media (max-width: 767px) {
        body {
          font-size: 14px;
        }

        /* Ajustar paddings y m√°rgenes para m√≥vil */
        .max-w-\\[1800px\\] {
          padding-left: 1rem !important;
          padding-right: 1rem !important;
        }

        /* Navegaci√≥n t√°ctil m√°s grande */
        button, a, [role="button"] {
          min-height: 44px; /* Recomendaci√≥n de Apple para t√°ctil */
          min-width: 44px;
        }

        /* Textos m√°s legibles en m√≥vil */
        h1 { font-size: 1.75rem !important; }
        h2 { font-size: 1.5rem !important; }
        h3 { font-size: 1.25rem !important; }
        p { font-size: 0.875rem; line-height: 1.5; }

        /* Ocultar elementos decorativos en m√≥vil */
        .float-animation,
        .hidden-mobile {
          display: none !important;
        }

        /* Cards m√°s compactos */
        .card-hover-effect {
          padding: 1rem !important;
        }

        /* Grids a una columna en m√≥vil */
        .grid {
          grid-template-columns: 1fr !important;
          gap: 1rem !important;
        }

        /* Im√°genes responsive */
        img {
          max-width: 100%;
          height: auto;
          object-fit: contain;
        }

        /* Stats widget oculto en m√≥vil */
        .fixed.bottom-8.left-8 {
          display: none !important;
        }

        /* Bot√≥n flotante m√°s accesible */
        .fixed.bottom-8.right-8 {
          bottom: 1.5rem !important;
          right: 1.5rem !important;
          width: 3.5rem !important;
          height: 3.5rem !important;
        }

        /* Modales fullscreen en m√≥vil */
        [class*="modal"],
        [class*="dialog"] {
          width: 100% !important;
          height: 100% !important;
          margin: 0 !important;
          border-radius: 0 !important;
        }
      }

      /* Tablets Portrait (768px - 1023px) */
      @media (min-width: 768px) and (max-width: 1023px) {
        body {
          font-size: 15px;
        }

        /* Padding moderado para tablets */
        .max-w-\\[1800px\\] {
          padding-left: 2rem !important;
          padding-right: 2rem !important;
        }

        /* Grids a 2 columnas en tablet */
        .grid {
          grid-template-columns: repeat(2, 1fr) !important;
          gap: 1.5rem !important;
        }

        /* Textos apropiados para tablet */
        h1 { font-size: 2rem !important; }
        h2 { font-size: 1.75rem !important; }
        h3 { font-size: 1.5rem !important; }

        /* Cards con buen espaciado */
        .card-hover-effect {
          padding: 1.5rem !important;
        }

        /* Navegaci√≥n horizontal scroll en tablet */
        .overflow-x-auto {
          -webkit-overflow-scrolling: touch;
          scrollbar-width: thin;
        }

        /* Stats widget visible pero m√°s peque√±o */
        .fixed.bottom-8.left-8 {
          bottom: 1.5rem !important;
          left: 1.5rem !important;
          padding: 1rem !important;
        }
      }

      /* Desktop (1024px+) */
      @media (min-width: 1024px) {
        body {
          font-size: 16px;
        }

        /* M√°ximo ancho para contenido */
        .max-w-\\[1800px\\] {
          max-width: 1800px;
          margin-left: auto;
          margin-right: auto;
        }

        /* Grids a 3-4 columnas en desktop */
        .grid {
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)) !important;
          gap: 2rem !important;
        }

        /* Hover effects solo en desktop */
        .card-hover-effect:hover {
          transform: translateY(-8px) scale(1.02);
        }

        /* Elementos flotantes con animaci√≥n */
        .float-animation {
          animation: float 6s ease-in-out infinite;
        }
      }

      /* Large Desktop (1440px+) */
      @media (min-width: 1440px) {
        body {
          font-size: 17px;
        }

        /* M√°s espacio en pantallas grandes */
        .max-w-\\[1800px\\] {
          padding-left: 3rem !important;
          padding-right: 3rem !important;
        }
      }

      /* Ultra Wide (1920px+) */
      @media (min-width: 1920px) {
        body {
          font-size: 18px;
        }

        /* Grids hasta 4 columnas en ultra wide */
        .grid {
          grid-template-columns: repeat(4, 1fr) !important;
        }
      }

      /* Touch Device Optimizations */
      @media (hover: none) and (pointer: coarse) {
        /* Dispositivos t√°ctiles - √°reas de toque m√°s grandes */
        button, a, [role="button"] {
          min-height: 48px;
          min-width: 48px;
          padding: 0.75rem 1.5rem;
        }

        /* Eliminar hover effects en t√°ctil */
        .card-hover-effect:hover {
          transform: none !important;
        }

        /* Scrolling suave en t√°ctil */
        * {
          -webkit-overflow-scrolling: touch;
          scroll-behavior: smooth;
        }

        /* Desactivar animaciones complejas en t√°ctil */
        .float-animation,
        .shimmer,
        .glow-effect {
          animation: none !important;
        }
      }

      /* Landscape Mobile (orientaci√≥n horizontal en m√≥vil) */
      @media (max-width: 767px) and (orientation: landscape) {
        /* Reducir altura de headers en landscape */
        .fixed.top-0 {
          height: 3.5rem !important;
        }

        .fixed.top-20 {
          top: 3.5rem !important;
        }

        .pt-40 {
          padding-top: 7rem !important;
        }

        /* Modales m√°s compactos en landscape */
        [class*="modal"] {
          max-height: 90vh;
          overflow-y: auto;
        }
      }

      /* Dark Mode Responsive Adjustments */
      @media (prefers-color-scheme: dark) {
        body {
          background-color: #0f172a;
          color: #f1f5f9;
        }

        /* Mejor contraste en dark mode m√≥vil */
        @media (max-width: 767px) {
          .text-slate-600 {
            color: #cbd5e1 !important;
          }
        }
      }

      /* Reduced Motion - Accesibilidad */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }

        .float-animation,
        .glow-effect,
        .shimmer,
        .animated-gradient {
          animation: none !important;
        }
      }

      /* Print Styles */
      @media print {
        .fixed,
        button,
        nav,
        [role="navigation"] {
          display: none !important;
        }

        body {
          background: white;
          color: black;
        }

        .card-hover-effect {
          box-shadow: none !important;
          border: 1px solid #ccc !important;
        }
      }

      /* Safe Area Insets para dispositivos con notch (iPhone X+) */
      @supports (padding: max(0px)) {
        body {
          padding-left: max(0px, env(safe-area-inset-left));
          padding-right: max(0px, env(safe-area-inset-right));
        }

        .fixed.top-0 {
          padding-top: max(0px, env(safe-area-inset-top));
        }

        .fixed.bottom-8 {
          padding-bottom: max(0.5rem, env(safe-area-inset-bottom));
        }
      }
    </style>

    <!-- Service Worker Registration -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker
            .register('/sw.js')
            .then(registration => {
              console.log('‚úÖ Service Worker registrado:', registration.scope);

              // Verificar actualizaciones cada 5 minutos
              setInterval(() => {
                registration.update();
              }, 5 * 60 * 1000);
            })
            .catch(error => {
              console.log('‚ùå Error al registrar Service Worker:', error);
            });
        });

        // Detectar cuando hay una nueva versi√≥n disponible
        navigator.serviceWorker.addEventListener('controllerchange', () => {
          console.log('üîÑ Nueva versi√≥n de la app disponible');
          // Opcional: mostrar notificaci√≥n al usuario
        });
      }

      // Instalaci√≥n de PWA
      let deferredPrompt;

      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        console.log('üí° La app puede instalarse');

        // Aqu√≠ puedes mostrar un bot√≥n de instalaci√≥n personalizado
        // Por ahora solo lo guardamos para uso futuro
      });

      window.addEventListener('appinstalled', () => {
        console.log('‚úÖ PWA instalada correctamente');
        deferredPrompt = null;
      });
    </script>
    <script type="importmap">
    {
      "imports": {
        "date-fns": "https://esm.sh/date-fns@^4.1.0",
        "date-fns/": "https://esm.sh/date-fns@^4.1.0/",
        "react": "https://esm.sh/react@^19.2.3",
        "react/": "https://esm.sh/react@^19.2.3/",
        "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
        "recharts": "https://esm.sh/recharts@^3.6.0",
        "zustand": "https://esm.sh/zustand@^5.0.9",
        "zustand/": "https://esm.sh/zustand@^5.0.9/",
        "lucide-react": "https://esm.sh/lucide-react@^0.562.0",
        "@supabase/supabase-js": "https://esm.sh/@supabase/supabase-js@^2.48.1",
        "@google/genai": "https://esm.sh/@google/genai@^1.34.0"
      }
    }
    </script>
  </head>
  <body class="transition-colors duration-500 selection:bg-indigo-100 selection:text-indigo-600">
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>
